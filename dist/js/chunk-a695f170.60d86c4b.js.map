{"version":3,"sources":["webpack:///./src/assets/on.png","webpack:///./src/views/dashboard/components/core/MyMaps.vue?a19c","webpack:///src/views/dashboard/components/core/MyMaps.vue","webpack:///./src/views/dashboard/components/core/MyMaps.vue?c274","webpack:///../../../src/components/VGrid/VLayout.ts","webpack:///./src/views/dashboard/components/core/MyMaps.vue","webpack:///./src/assets/off.png","webpack:///./src/views/dashboard/pages/UserProfile.vue?480b","webpack:///src/views/dashboard/pages/UserProfile.vue","webpack:///./src/views/dashboard/pages/UserProfile.vue?d195","webpack:///../../../src/components/VBottomSheet/VBottomSheet.ts","webpack:///./src/views/dashboard/pages/UserProfile.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","style","width","height","center","zoom","on","mapReady","clickMap","ref","staticClass","model","value","callback","$$v","keyword","expression","_l","k","key","idx","position","status","url","imgOn","imgOff","size","$event","devClick","locationSuccess","staticRenderFns","props","type","String","default","data","devList","methods","$store","state","mobile","map","addEventListener","obj","e","changedTouches","target","time","Date","now","X","pageX","Y","pageY","geolocation","BMap","Geolocation","commit","getCurrentPosition","$message","success","console","log","point","AddressComponent","marker","$refs","searchRef","blur","removeOverlay","last","geoc","getLocation","addOverlay","component","VContainer","VLayout","VTextField","headers","devices","scopedSlots","_u","fn","_g","_v","dialogName","_s","formTitle","errorMsg","editedDevice","$set","addDevice","close","dialogForm","valid","switch1","slavers","v","changeSelect","length","templates","selectTemplate","tS","editedSlaver","location","sheet","save","proxy","item","editItem","deleteItem","components","myMaps","text","align","sortable","computed","set","get","editedDeviceIndex","deviceName","watch","dialog","val","created","dispatch","editedSlaverIndex","Object","assign","$msg","setTimeout","templateID","id","templateName","indexOf","addr","editedtSlaverIndex","confirm","devID","form","validate","slaverIndex","parseInt","push","dataPoints","splice","VDialog","name","inset","maxWidth","transition","classes","VBottomSheet","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VDataTable","VDivider","VForm","VIcon","VImg","VRow","VSelect","VSheet","VSpacer","VSwitch","VToolbar"],"mappings":"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","file":"js/chunk-a695f170.60d86c4b.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADkklEQVRoge3YT4jVVRQH8I86QzFqpBVhmUnhTDYURGUQ/aGgFIpaVbgIEZw2Zc2ibNOfRYtqWYskamstKgnaSCOkLrKkXWFmi5AS08xqmsg3ZrY4d/D3fu/35v35vfdmoPeFw/vx+91zzvfed++55xz66KOPPvr4P2NBB20txO14CLfielyEf3ESR7APE+n3XAd9l8JCbMJBQaoZOYgtSXdOMYwvNU88L/sx2nPWCffj9wYEm5HJZKunWI+/C8hU8B4ewWpciMW4FhuxA9MFetPY0CvyaxSv/Ee4ugn9VfigQP83jHSBrzV4EbtwWKxy1vFZPNOG3a0iQuXPRMci4y3Yq/Eebof8DJ4usPd4CXtgEG+JlW1EfmdZZ/g4Z/PrMsYuxm6NiZ/DFK4s4yxhNc7kbN/WjqFB7FFM9lNx8YyIqHIBlpaiXY38oT6NQ+Lf2SwWtiHeLCD+He7qINF62FTgOyt/4HmxcIVYpzYi7MWybrLO4BqzT2BGvsCKIgMTale+V+SJnOgvzU3iB1yeVV5bMKgX2yaPe3GDOFvLxa54FacK+O0XZxaxt/IHdj5hmeBU9/7Jh80tvefYEAMiE8jy/BVDRHqQ/dCVfKQDWIFjqrk+Cn/mXnYyvncaS7ENxwXXHUQ+np3Akrli1wKG8BoOLBAhczjz8br0rhtYJNKEe3Bz8nuF84s2haNiW3+Fz3BA3FFFuJHaO2CsC8Svwuv4SW00aSQ/inC6sp7xbTmFiQ4SvxRvq60h2pEKtuOSvJORgsF3d4D8RhHqyhLPy0k8lneWvwsOi9uwHQyKVa9HYFLUzWPitr0s6Qym53V4Au+rDTBZ2S7uB8SByidz+9qcxId1HB7Dk9Ll0ySGks7PdWxWFVRF6fT3ImK0gvtUdywqeEm58LwEL6s+SxU8mB00oH41tlv8rWubJPJAcnAcd5QgnsedyWZFtDBr0EpJOSOncFOBrfWihVKEVaIrsUtUXlNJDqV3T4nQW0931h7SAN7QXFE/I7+IVLgRVuJd/NOEzTN4R4m6exSftDCJE6IjXQ8btNeKnMTD7U6CaGw9J3Lyb9Umf1k5KsrDIhtFLcVmZTrZmFNsVr0tvxFFyajodCxOz+Pp28y4s0l3XmBMtEy2isSuHhalMad1JzcrhcKuQgfG9tEOhkU6MJlkp3lwWFvBuNqIMz6njNrAs86Tf6FV5dkiQa/wuSC/B6+0qvwffjkFRrMuYVoAAAAASUVORK5CYII=\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"padding\":\"0\"},attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"wrap\":\"\"}},[_c('baidu-map',{style:({ width: _vm.width, height: _vm.height }),attrs:{\"scroll-wheel-zoom\":\"\",\"center\":_vm.center,\"zoom\":_vm.zoom},on:{\"ready\":_vm.mapReady,\"click\":_vm.clickMap}},[_c('bm-control',[_c('div',[_c('v-text-field',{ref:\"searchRef\",staticClass:\"purple-input\",attrs:{\"label\":\"搜索地点\",\"prepend-inner-icon\":\"mdi-magnify\",\"outlined\":\"\",\"rounded\":\"\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}}),_c('bm-local-search',{attrs:{\"panel\":!!_vm.keyword,\"keyword\":_vm.keyword}})],1)]),_vm._l((_vm.devList),function(k){return _c('bm-marker',{key:k.idx,staticClass:\"BM_Marker\",attrs:{\"position\":k.position,\"animation\":k.status ? 'BMAP_ANIMATION_BOUNCE' : '',\"icon\":{\n          url: k.status ? _vm.imgOn : _vm.imgOff,\n          size: { height: 45, width: 55 }\n        }},on:{\"click\":function($event){return _vm.devClick(k)}}})}),_c('bm-geolocation',{attrs:{\"anchor\":\"BMAP_ANCHOR_BOTTOM_RIGHT\",\"show-address-bar\":true,\"auto-location\":true},on:{\"locationSuccess\":_vm.locationSuccess}})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container style=\"padding:0\" fill-height fluid grid-list-xl>\n    <v-layout justify-center wrap>\n      <baidu-map\n        :style=\"{ width: width, height: height }\"\n        scroll-wheel-zoom\n        :center=\"center\"\n        :zoom=\"zoom\"\n        @ready=\"mapReady\"\n        @click=\"clickMap\"\n      >\n        <bm-control>\n          <div>\n            <v-text-field\n              ref=\"searchRef\"\n              v-model=\"keyword\"\n              class=\"purple-input\"\n              label=\"搜索地点\"\n              prepend-inner-icon=\"mdi-magnify\"\n              outlined\n              rounded\n            />\n            <bm-local-search :panel=\"!!keyword\" :keyword=\"keyword\" />\n          </div>\n        </bm-control>\n\n        <bm-marker\n          v-for=\"k in devList\"\n          :key=\"k.idx\"\n          class=\"BM_Marker\"\n          :position=\"k.position\"\n          :animation=\"k.status ? 'BMAP_ANIMATION_BOUNCE' : ''\"\n          :icon=\"{\n            url: k.status ? imgOn : imgOff,\n            size: { height: 45, width: 55 }\n          }\"\n          @click=\"devClick(k)\"\n        />\n        <bm-geolocation\n          anchor=\"BMAP_ANCHOR_BOTTOM_RIGHT\"\n          :show-address-bar=\"true\"\n          :auto-location=\"true\"\n          @locationSuccess=\"locationSuccess\"\n        />\n      </baidu-map>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport imgOn from '@/assets/on.png'\nimport imgOff from '@/assets/off.png'\nexport default {\n  props: {\n    width: {\n      type: String,\n      default: '100%'\n    },\n    height: {\n      type: String,\n      default: '100%'\n    }\n  },\n  data() {\n    return {\n      // 设备图像\n      imgOn: imgOn,\n      imgOff: imgOff,\n      //\n      keyword: '',\n      center: { lng: 106, lat: 29 },\n      zoom: 6,\n      devList: [\n        { idx: 0, position: { lng: 100, lat: 20 }, status: true, data: [] },\n        {\n          idx: 1,\n          position: { lng: 106.53, lat: 29.54 },\n          status: false,\n          data: []\n        },\n        {\n          idx: 2,\n          position: { lng: 106.53063501, lat: 29.54460611 },\n          status: true,\n          data: []\n        }\n      ]\n    }\n  },\n  methods: {\n    mapReady({ BMap, map }) {\n      // 解决移动端点击事件不生效问题\n\n      if (this.$store.state.mobile) {\n        const obj = {}\n        map.addEventListener('touchstart', e => {\n          obj.e = e.changedTouches ? e.changedTouches[0] : e\n          obj.target = e.target\n          obj.time = Date.now()\n          obj.X = obj.e.pageX\n          obj.Y = obj.e.pageY\n        })\n        map.addEventListener('touchend', e => {\n          obj.e = e.changedTouches ? e.changedTouches[0] : e\n          if (\n            obj.target === e.target &&\n            // 大于 750 可看成长按了\n            Date.now() - obj.time < 750 &&\n            // 应用勾股定理判断，如果 touchstart 的点到 touchend 的点小于 15，就可当成地图被点击了\n            Math.sqrt(\n              Math.pow(obj.X - obj.e.pageX, 2) +\n                Math.pow(obj.Y - obj.e.pageY, 2)\n            ) < 15\n          ) {\n            // 地图点击需要执行的操作\n            this.clickMap(e)\n          }\n        })\n      }\n      var geolocation = new BMap.Geolocation()\n      this.$store.commit('setMapInstance', { map, BMap })\n      geolocation.getCurrentPosition(\n        r => {\n          if (geolocation.getStatus() === 0) {\n            this.center = r.point\n            const { lat, lng } = r.point\n            this.zoom = 15\n            this.$store.position = lat + ',' + lng\n          } else {\n            this.$message.error('定位失败')\n          }\n        },\n        { enableHighAccuracy: true }\n      )\n    },\n    devClick(k) {\n      this.$message.success('handel k')\n    },\n    locationSuccess(point, AddressComponent, marker) {\n      console.log(point, AddressComponent, marker)\n    },\n    clickMap(e) {\n      this.$refs.searchRef.blur()\n      this.keyword = ''\n      const { map, BMap } = this.$store.state.mapInstance\n      const point = e.point\n      const last = this.$store.state.lastMarker\n      const geoc = new BMap.Geocoder()\n      map.removeOverlay(last)\n      const marker = new BMap.Marker(point)\n      geoc.getLocation(point, res => {\n        const { city, district, street, streetNumber } = res.addressComponents\n        this.$store.commit(\n          'setLocation',\n          city + district + street + streetNumber\n        )\n      })\n      map.addOverlay(marker)\n      this.$store.commit('setSelectPoint', point)\n      this.$store.commit('setLastMarker', marker)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyMaps.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyMaps.vue?vue&type=script&lang=js&\"","import './_grid.sass'\n\nimport Grid from './grid'\n\nexport default Grid('layout')\n","import { render, staticRenderFns } from \"./MyMaps.vue?vue&type=template&id=3b4d76b8&\"\nimport script from \"./MyMaps.vue?vue&type=script&lang=js&\"\nexport * from \"./MyMaps.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VContainer,VLayout,VTextField})\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADK0lEQVRoge3ZzatVVRjH8c89XvMtX6AyzM5AQaWUIE2xEhoEvUyqQcNEu5YUlFCQjYL6Awxy0CgibFBeHRQkRRr0Al2KBmap5MCXwhfoVjdvkpl1G6wl7Lvv2efuu/c+L+H5wcPZsNd61netvdfzPGsfeuqpp556uprVV6GvGu7CQ1iLWzEP/2IYp/A59sffsQrHLqUaNuGIAJXHjuCJ2LejWo6v5AdP2xBWtp066j6MTAKYx85HX23V/fizJHjSLuGBdsEvU83Kp+03rGgV8Ev4CMfwVwvgk3uissh4Bz5rIWyWbSwLPh2v458OwI/huzLwc/Fhh8CTtq4I/HR82gXwY7iIH/AeNmNBngns7ALwLBvBdszIgl8r1CydBp3MhrCo0QT2dwFcXjuOhUn4W7oAaqr2JfoJ1eDDjR5Jl+tOPE3Iegdwb5sGPoNP8A0OC2eEX/A7ZuK6aDdiNe6O1igK/YqbCeVBKx/3OezA7YqVCTWsxxv4I+X7URhtEfhxPKlJ6Cug+XgGZ+MYuwj1eJXgF/BixeBpzcOrGOoTMt7yihx/LRRjxzLu13Ab7sEGLMX10Qhn559xAl8IZ+dDQo5qpCVUlwPelr3qi/GKsImn6vcMXsZNGb5trwD+NY036EK8hb8rGOMS3sQN6UFWlHR8ENNSPvvwuBAiqw4Ow9H3uAU7UMLhYyn42Rhs0n4Eu/GsUDbXY5/Z8XpdvDeo+dF1MPYBaxQv5tLv5t6Mdt8LYXWO/JqDrULSa+Rzb7Jx0XL6mtSg6bxyHs+JtUtB9eP5Br5H042KvEqLU4PtSdw7KIa6irQk+rzif0+6wYICk0gfwmdgCwYwKwOkLiS7ffhRSH4X4vW+eK+e0XdW9D0gI2z3C2Ex76H+WxOjUJbqwga+nMPvZbzbZCKTarX8SS4rDyT1iGJ116iSJf8yvICPcbQJxG4T90NSpwvAX7GfykygKp0yHuqQEO9X4tpoq7BN+DaUbHuy/bgT9aCwkifwlOb/DdSEE9dpAb7tX697+r+ojneEAm04XhcOm53QFhMjzkBHiaaoacaXHu8rVzN1RDOF8uGDeD0l/Qf4flguoyo9QwAAAABJRU5ErkJggg==\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-data-table',{staticClass:\"elevation-2\",attrs:{\"headers\":_vm.headers,\"items\":_vm.devices,\"sort-by\":\"id\",\"fixed-header\":\"\",\"height\":\"60vh\",\"no-data-text\":\"请新建设备\"},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-dialog',{attrs:{\"max-width\":\"500px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"mb-2\",attrs:{\"color\":\"primary\",\"dark\":\"\"}},on),[_vm._v(\" 新建设备 \")])]}}]),model:{value:(_vm.dialogName),callback:function ($$v) {_vm.dialogName=$$v},expression:\"dialogName\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"设备名称\",\"error-messages\":_vm.errorMsg},model:{value:(_vm.editedDevice.deviceName),callback:function ($$v) {_vm.$set(_vm.editedDevice, \"deviceName\", $$v)},expression:\"editedDevice.deviceName\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.addDevice}},[_vm._v(\" 确定 \")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"500px\",\"scrollable\":\"\"},on:{\"click:outside\":_vm.close},model:{value:(_vm.dialogForm),callback:function ($$v) {_vm.dialogForm=$$v},expression:\"dialogForm\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" \"+_vm._s(_vm.switch1 ? '新建' : '编辑')+\"从机 \"),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"5\"}},[_c('v-switch',{attrs:{\"label\":\"新建从机\"},model:{value:(_vm.switch1),callback:function ($$v) {_vm.switch1=$$v},expression:\"switch1\"}})],1),_c('v-col',{attrs:{\"cols\":\"7\"}},[_c('v-select',{attrs:{\"disabled\":_vm.switch1,\"items\":_vm.editedDevice.slavers,\"item-text\":\"slaverName\",\"return-object\":\"\",\"label\":\"选择要修改的从机\",\"rules\":[\n                            function (v) {\n                              if (_vm.switch1) {\n                                return true\n                              }\n                              return !!v || '从机不能为空'\n                            }\n                          ]},on:{\"change\":_vm.changeSelect}})],1)],1)],1),_c('v-card-text',[_c('v-container',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"设备名称\",\"required\":\"\",\"rules\":[\n                              function (v) { return !!v || '名字不能为空'; },\n                              function (v) { return (v && v.length <= 6) || '名字不能超过10个字符'; }\n                            ]},model:{value:(_vm.editedDevice.deviceName),callback:function ($$v) {_vm.$set(_vm.editedDevice, \"deviceName\", $$v)},expression:\"editedDevice.deviceName\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"8\"}},[_c('v-select',{attrs:{\"no-data-text\":\"请添加模板\",\"items\":_vm.$store.state.templates,\"item-text\":\"templateName\",\"item-value\":\"id\",\"label\":\"绑定模板\",\"return-object\":\"\",\"rules\":[\n                              function (v) {\n                                if (v) {\n                                  return true\n                                }\n                                return '请选择数据模板'\n                              }\n                            ]},on:{\"change\":_vm.selectTemplate},model:{value:(_vm.tS),callback:function ($$v) {_vm.tS=$$v},expression:\"tS\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"从机名称\",\"rules\":[\n                              function (v) { return !!v || '名字不能为空'; },\n                              function (v) { return (v && v.length <= 6) || '名字不能超过6个字符'; }\n                            ]},model:{value:(_vm.editedSlaver.slaverName),callback:function ($$v) {_vm.$set(_vm.editedSlaver, \"slaverName\", $$v)},expression:\"editedSlaver.slaverName\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"从机地址\",\"type\":\"number\"},model:{value:(_vm.editedSlaver.slaverIndex),callback:function ($$v) {_vm.$set(_vm.editedSlaver, \"slaverIndex\", $$v)},expression:\"editedSlaver.slaverIndex\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"设备ID\",\"rules\":[\n                              function (v) { return v.length === 8 || '设备ID长度为8位'; }\n                            ]},model:{value:(_vm.editedDevice.devID),callback:function ($$v) {_vm.$set(_vm.editedDevice, \"devID\", $$v)},expression:\"editedDevice.devID\"}})],1),_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('v-text-field',{attrs:{\"label\":\"设备地址\"},model:{value:(_vm.location),callback:function ($$v) {_vm.location=$$v},expression:\"location\"}})],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-bottom-sheet',{scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\n                            var on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"color\":\"orange\",\"dark\":\"\"}},on),[_vm._v(\" 打开地图 \")])]}}]),model:{value:(_vm.sheet),callback:function ($$v) {_vm.sheet=$$v},expression:\"sheet\"}},[_c('v-sheet',{staticClass:\"text-center\",attrs:{\"height\":_vm.$store.state.mobile ? '60vh' : '30vh'}},[_c('myMaps')],1)],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-btn',{attrs:{\"color\":\"success darken-1\",\"text\":\"\"},on:{\"click\":_vm.commit}},[_vm._v(\" 提交 \")]),_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\" 保存修改 \")]),_c('v-btn',{attrs:{\"color\":\"error darken-1\",\"text\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\" 取消 \")])],1)],1)],1)],1)],1)]},proxy:true},{key:\"item.actions\",fn:function(ref){\n                            var item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\" mdi-pencil \")]),_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\" mdi-delete \")])]}}])})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-card',[_c('v-img',{staticClass:\"white--text align-end\",attrs:{\"height\":\"200px\",\"src\":\"https://cdn.vuetifyjs.com/images/cards/docks.jpg\"}},[_c('v-card-title',[_vm._v(\" 操作说明 \")])],1),_c('v-card-text',[_c('span',[_vm._v(\"设备ID:填写8位数字。\")]),_c('br'),_c('br'),_c('v-divider'),_c('span',[_vm._v(\"从机地址:填写Modbus协议的从机地址数字。\")]),_c('br'),_c('br'),_c('v-divider'),_c('span',[_vm._v(\"设备地址:点击打开地图从地图上选取，也可以手动输入。\")]),_c('v-divider')],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fill-height>\n    <v-row justify=\"center\">\n      <v-col cols=\"12\" md=\"8\">\n        <v-data-table\n          class=\"elevation-2\"\n          :headers=\"headers\"\n          :items=\"devices\"\n          sort-by=\"id\"\n          fixed-header\n          height=\"60vh\"\n          no-data-text=\"请新建设备\"\n        >\n          <template v-slot:top>\n            <v-toolbar flat color=\"white\">\n              <v-dialog v-model=\"dialogName\" max-width=\"500px\">\n                <template v-slot:activator=\"{ on }\">\n                  <v-btn color=\"primary\" dark class=\"mb-2\" v-on=\"on\">\n                    新建设备\n                  </v-btn>\n                </template>\n                <v-card>\n                  <v-card-title>\n                    <span class=\"headline\">{{ formTitle }}</span>\n                  </v-card-title>\n                  <v-card-text>\n                    <v-text-field\n                      v-model=\"editedDevice.deviceName\"\n                      label=\"设备名称\"\n                      :error-messages=\"errorMsg\"\n                    />\n                  </v-card-text>\n                  <v-card-actions>\n                    <v-spacer />\n                    <v-btn color=\"blue darken-1\" text @click=\"addDevice\">\n                      确定\n                    </v-btn>\n                  </v-card-actions>\n                </v-card>\n              </v-dialog>\n\n              <!-- 从机表 -->\n              <v-dialog\n                v-model=\"dialogForm\"\n                max-width=\"500px\"\n                scrollable\n                @click:outside=\"close\"\n              >\n                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                  <v-card>\n                    <v-card-title>\n                      {{ switch1 ? '新建' : '编辑' }}从机\n                      <v-row>\n                        <v-col cols=\"5\">\n                          <v-switch v-model=\"switch1\" label=\"新建从机\" />\n                        </v-col>\n                        <v-col cols=\"7\">\n                          <v-select\n                            :disabled=\"switch1\"\n                            :items=\"editedDevice.slavers\"\n                            item-text=\"slaverName\"\n                            return-object\n                            label=\"选择要修改的从机\"\n                            :rules=\"[\n                              v => {\n                                if (switch1) {\n                                  return true\n                                }\n                                return !!v || '从机不能为空'\n                              }\n                            ]\"\n                            @change=\"changeSelect\"\n                          />\n                        </v-col>\n                      </v-row>\n                    </v-card-title>\n                    <v-card-text>\n                      <v-container>\n                        <v-row justify=\"center\">\n                          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-text-field\n                              v-model=\"editedDevice.deviceName\"\n                              label=\"设备名称\"\n                              required\n                              :rules=\"[\n                                v => !!v || '名字不能为空',\n                                v =>\n                                  (v && v.length <= 6) || '名字不能超过10个字符'\n                              ]\"\n                            />\n                          </v-col>\n                          <v-col cols=\"12\" sm=\"6\" md=\"8\">\n                            <v-select\n                              v-model=\"tS\"\n                              no-data-text=\"请添加模板\"\n                              :items=\"$store.state.templates\"\n                              item-text=\"templateName\"\n                              item-value=\"id\"\n                              label=\"绑定模板\"\n                              return-object\n                              :rules=\"[\n                                v => {\n                                  if (v) {\n                                    return true\n                                  }\n                                  return '请选择数据模板'\n                                }\n                              ]\"\n                              @change=\"selectTemplate\"\n                            />\n                          </v-col>\n                          <v-col cols=\"12\" md=\"4\">\n                            <v-text-field\n                              v-model=\"editedSlaver.slaverName\"\n                              label=\"从机名称\"\n                              :rules=\"[\n                                v => !!v || '名字不能为空',\n                                v =>\n                                  (v && v.length <= 6) || '名字不能超过6个字符'\n                              ]\"\n                            />\n                          </v-col>\n                          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-text-field\n                              v-model=\"editedSlaver.slaverIndex\"\n                              label=\"从机地址\"\n                              type=\"number\"\n                            />\n                          </v-col>\n                          <v-col cols=\"12\" md=\"4\">\n                            <v-text-field\n                              v-model=\"editedDevice.devID\"\n                              label=\"设备ID\"\n                              :rules=\"[\n                                v => v.length === 8 || '设备ID长度为8位'\n                              ]\"\n                            />\n                          </v-col>\n                          <v-col cols=\"8\">\n                            <v-text-field v-model=\"location\" label=\"设备地址\" />\n                          </v-col>\n                          <v-col cols=\"4\">\n                            <v-bottom-sheet v-model=\"sheet\">\n                              <template v-slot:activator=\"{ on }\">\n                                <v-btn color=\"orange\" dark v-on=\"on\">\n                                  打开地图\n                                </v-btn>\n                              </template>\n                              <v-sheet\n                                class=\"text-center\"\n                                :height=\"$store.state.mobile ? '60vh' : '30vh'\"\n                              >\n                                <myMaps />\n                              </v-sheet>\n                            </v-bottom-sheet>\n                          </v-col>\n                        </v-row>\n                      </v-container>\n                    </v-card-text>\n\n                    <v-card-actions>\n                      <v-btn color=\"success darken-1\" text @click=\"commit\">\n                        提交\n                      </v-btn>\n                      <v-spacer />\n                      <v-btn color=\"blue darken-1\" text @click=\"save\">\n                        保存修改\n                      </v-btn>\n                      <v-btn color=\"error darken-1\" text @click=\"close\">\n                        取消\n                      </v-btn>\n                    </v-card-actions>\n                  </v-card>\n                </v-form>\n              </v-dialog>\n            </v-toolbar>\n          </template>\n          <template v-slot:item.actions=\"{ item }\">\n            <v-icon small class=\"mr-2\" @click=\"editItem(item)\">\n              mdi-pencil\n            </v-icon>\n            <v-icon class=\"mr-2\" small @click=\"deleteItem(item)\">\n              mdi-delete\n            </v-icon>\n          </template>\n        </v-data-table>\n      </v-col>\n      <v-col cols=\"12\" md=\"4\">\n        <v-card>\n          <v-img\n            class=\"white--text align-end\"\n            height=\"200px\"\n            src=\"https://cdn.vuetifyjs.com/images/cards/docks.jpg\"\n          >\n            <v-card-title>\n              操作说明\n            </v-card-title>\n          </v-img>\n\n          <v-card-text>\n            <span>设备ID:填写8位数字。</span>\n            <br>\n            <br>\n            <v-divider />\n            <span>从机地址:填写Modbus协议的从机地址数字。</span>\n            <br>\n            <br>\n            <v-divider />\n            <span>设备地址:点击打开地图从地图上选取，也可以手动输入。</span>\n            <v-divider />\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n<script>\nimport myMaps from '../components/core/MyMaps'\nexport default {\n  components: {\n    myMaps\n  },\n  data: () => ({\n    // 添加模板部分\n    dialogName: false,\n    sheet: false,\n    // 添加从机点部分\n    tS: {},\n    valid: false,\n    dialogForm: false,\n    editedDeviceIndex: -1,\n    editedtSlaverIndex: -1,\n    switch1: false,\n    editedSlaver: {\n      slaverName: ''\n    },\n    editedDevice: {\n      slavers: [],\n      deviceName: '',\n      devID: ''\n    },\n    headers: [\n      {\n        text: '设备ID',\n        align: 'start',\n        value: 'devID',\n        sortable: false\n      },\n      { text: '名称', value: 'deviceName', sortable: false },\n      { text: '修改时间', value: 'updatedAt', sortable: false },\n      { text: '操作', value: 'actions', sortable: false }\n    ]\n  }),\n\n  computed: {\n    location: {\n      set: function(v) {\n        this.$store.commit('setLocation', v)\n      },\n      get: function() {\n        return this.$store.state.location\n      }\n    },\n    formTitle() {\n      return this.editedDeviceIndex === -1 ? '新建设备' : '编辑设备'\n    },\n    errorMsg() {\n      return this.editedDevice.deviceName ? '' : '名称不能为空'\n    },\n    devices() {\n      return this.$store.state.devices\n    }\n  },\n\n  watch: {\n    dialog(val) {\n      val || this.close()\n    }\n  },\n\n  created() {\n    this.$store.dispatch('getTemplate')\n    this.$store.dispatch('getDevice')\n  },\n\n  methods: {\n    // 添加模板\n    addDevice() {\n      // 编辑信息初始化\n      this.editedDeviceIndex = -1\n      this.editedSlaverIndex = -1\n      this.editedSlaver = Object.assign({ slaverName: '' })\n      if (!this.editedDevice.deviceName) {\n        return\n      }\n      // 验证数据是否存在\n      this.devices.map((v, idx) => {\n        if (v.deviceName === this.deviceName) {\n          return this.$msg({ color: 'error', content: '设备名称已存在' })\n        }\n      })\n      this.$msg({ color: 'info', content: '请继续添加从机' })\n\n      // 关闭dialogName 打开dialogForm\n      this.dialogName = false\n\n      this.switch1 = true\n      setTimeout(() => {\n        this.dialogForm = true\n      }, 200)\n    },\n\n    // 从机部分\n\n    // 选中模板\n    selectTemplate(v) {\n      this.editedSlaver.templateID = v.id\n      this.editedSlaver.templateName = v.templateName\n    },\n    editItem(item) {\n      this.editedDeviceIndex = this.devices.indexOf(item)\n      this.editedDevice = Object.assign({}, item)\n      this.dialogForm = true\n    },\n    changeSelect(v) {\n      this.editedSlaver = Object.assign({}, v)\n      this.tS = Object.assign({\n        id: v.templateID,\n        templateName: v.templateName\n      })\n      this.$store.commit('setLocation', this.editedDevice.addr)\n      this.$store.state.position = this.editedDevice.position\n      this.editedtSlaverIndex = this.editedDevice.slavers.indexOf(v)\n    },\n\n    deleteItem(item) {\n      confirm(`确定删除 ${item.deviceName} 吗?`) &&\n        this.$store.dispatch('deleteDevice', { call: this, v: item })\n    },\n\n    commit() {\n      // 判断是否为更新\n      if (this.editedDeviceIndex >= 0) {\n        return this.$store.dispatch('putDevice', this)\n      }\n      this.$store.dispatch('postDevice', this)\n      this.close()\n    },\n\n    close() {\n      this.dialogForm = false\n      this.editedSlaver = Object.assign({ slaverName: '' })\n      this.editedDevice = Object.assign({\n        slavers: [],\n        deviceName: '',\n        devID: ''\n      })\n      this.editedDeviceIndex = -1\n      this.switch1 = false\n    },\n\n    save() {\n      // 验证数据\n      if (this.$refs.form.validate()) {\n        // 添加position\n        this.editedDevice.position = this.$store.state.position\n        this.editedDevice.addr = this.location\n        this.editedSlaver.slaverIndex = parseInt(this.editedSlaver.slaverIndex)\n        // 为添加数据点\n        if (this.switch1) {\n          this.editedDevice.slavers.push({ ...this.editedSlaver })\n        } else {\n          this.editedDevice.dataPoints.splice(this.editedtSlaverIndex, 1, {\n            ...this.editedSlaver\n          })\n        }\n      }\n\n      // 调整开关至修改数据点\n      this.switch1 = false\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfile.vue?vue&type=script&lang=js&\"","import './VBottomSheet.sass'\n\n// Extensions\nimport VDialog from '../VDialog/VDialog'\n\n/* @vue/component */\nexport default VDialog.extend({\n  name: 'v-bottom-sheet',\n\n  props: {\n    inset: Boolean,\n    maxWidth: {\n      type: [String, Number],\n      default: 'auto',\n    },\n    transition: {\n      type: String,\n      default: 'bottom-sheet-transition',\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VDialog.options.computed.classes.call(this),\n        'v-bottom-sheet': true,\n        'v-bottom-sheet--inset': this.inset,\n      }\n    },\n  },\n})\n","import { render, staticRenderFns } from \"./UserProfile.vue?vue&type=template&id=1e94bd70&\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBottomSheet } from 'vuetify/lib/components/VBottomSheet';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBottomSheet,VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDataTable,VDialog,VDivider,VForm,VIcon,VImg,VRow,VSelect,VSheet,VSpacer,VSwitch,VTextField,VToolbar})\n"],"sourceRoot":""}