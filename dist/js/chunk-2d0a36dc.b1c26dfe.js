(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a36dc"],{"01af":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":""}},[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-data-table",{attrs:{headers:t.headers,items:t.templates,"sort-by":"id","fixed-header":"",height:"60vh","no-data-text":"请新建模板"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},i),[t._v(" 新建模板 ")])]}}]),model:{value:t.dialogName,callback:function(e){t.dialogName=e},expression:"dialogName"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-text-field",{attrs:{label:"模板名称","error-messages":t.errorMsg},model:{value:t.editedTemplate.templateName,callback:function(e){t.$set(t.editedTemplate,"templateName",e)},expression:"editedTemplate.templateName"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addTemplate}},[t._v(" 确定 ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px",scrollable:""},on:{"click:outside":t.close},model:{value:t.dialogForm,callback:function(e){t.dialogForm=e},expression:"dialogForm"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.switch1?"新建":"编辑")+"数据点 "),a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-switch",{attrs:{label:"新建数据点"},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}})],1),a("v-col",{attrs:{cols:"7"}},[a("v-select",{attrs:{disabled:t.switch1,items:t.editedTemplate.dataPoints,"item-text":"name","return-object":"",label:"选择要修改的数据点",rules:[function(e){return!!t.switch1||(!!e||"数据点不能为空")}]},on:{change:t.changeSelect}})],1)],1)],1),a("v-card-text",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"模板名称",required:"",rules:[function(t){return!!t||"名字不能为空"},function(t){return t&&t.length<=10||"名字不能超过10个字符"}]},model:{value:t.editedTemplate.templateName,callback:function(e){t.$set(t.editedTemplate,"templateName",e)},expression:"editedTemplate.templateName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"数据点名称",rules:[function(t){return!!t||"名字不能为空"},function(t){return t&&t.length<=10||"名字不能超过10个字符"}]},model:{value:t.editedDataPoint.name,callback:function(e){t.$set(t.editedDataPoint,"name",e)},expression:"editedDataPoint.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:t.selectData,"item-text":"label","item-value":"type",label:"数据类型",rules:[function(t){return 0===t||1===t||"请选择数据类型"}]},model:{value:t.editedDataPoint.dataType,callback:function(e){t.$set(t.editedDataPoint,"dataType",e)},expression:"editedDataPoint.dataType"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{type:"number",label:"采集频率(s)"},model:{value:t.editedDataPoint.frequency,callback:function(e){t.$set(t.editedDataPoint,"frequency",e)},expression:"editedDataPoint.frequency"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"采集指令",rules:[function(t){return!!t||"采集指令不能为空"}]},model:{value:t.editedDataPoint.message,callback:function(e){t.$set(t.editedDataPoint,"message",e)},expression:"editedDataPoint.message"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"单位"},model:{value:t.editedDataPoint.unit,callback:function(e){t.$set(t.editedDataPoint,"unit",e)},expression:"editedDataPoint.unit"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"12"}},[a("v-text-field",{attrs:{label:"格式化公式"},model:{value:t.editedDataPoint.formula,callback:function(e){t.$set(t.editedDataPoint,"formula",e)},expression:"editedDataPoint.formula"}})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"success darken-1",text:""},on:{click:t.commit}},[t._v(" 提交 ")]),a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 保存修改 ")]),a("v-btn",{attrs:{color:"error darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(i)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(i)}}},[t._v(" mdi-delete ")])]}}])})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-card",[a("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/docks.jpg"}},[a("v-card-title",[t._v(" 操作说明 ")])],1),a("v-card-text",[a("span",[t._v("采集指令:按modbus-rtu协议填写,省略从机地址位与CRC校验位。")]),a("br"),a("br"),a("v-divider"),a("span",[t._v("采集指令:按modbus-rtu协议填写,省略从机地址位与CRC校验位。")]),a("br"),a("br"),a("v-divider"),a("span",[t._v("采集公式:收到数据的处理公式，支持基本数学运算，使用v代表原始数据。")]),a("v-divider")],1)],1)],1)],1)],1)},s=[],l=(a("c975"),a("d81d"),a("a434"),a("5530")),d={data:function(){return{dialogName:!1,valid:!1,dialogForm:!1,editedTemplateIndex:-1,editedtDataPointIndex:-1,switch1:!1,selectData:[{type:0,label:"数值"},{type:1,label:"开关"}],editedDataPoint:{},editedTemplate:{dataPoints:[]},headers:[{text:"模板ID",align:"start",value:"id",sortable:!1},{text:"名称",value:"templateName",sortable:!1},{text:"修改时间",value:"updatedAt",sortable:!1},{text:"操作",value:"actions",sortable:!1}]}},computed:{formTitle:function(){return-1===this.editedTemplateIndex?"新建模板":"编辑模板"},errorMsg:function(){return this.editedTemplate.templateName?"":"名称不能为空"},templates:function(){return this.$store.state.templates}},watch:{dialog:function(t){t||this.close()}},created:function(){this.$store.dispatch("getTemplate")},methods:{addTemplate:function(){var t=this;this.editedTemplateIndex=-1,this.editedDataPointIndex=-1,this.editedDataPoint=Object.assign({}),this.editedTemplate.templateName&&(this.templates.map((function(e,a){if(e.templateName===t.templateName)return t.$msg({color:"error",content:"模板名称已存在"})})),this.$msg({color:"info",content:"请继续添加数据点"}),this.dialogName=!1,this.switch1=!0,setTimeout((function(){t.dialogForm=!0}),200))},editItem:function(t){this.editedTemplateIndex=this.templates.indexOf(t),this.editedTemplate=Object.assign({},t),this.dialogForm=!0},changeSelect:function(t){this.editedDataPoint=Object.assign({},t),this.editedtDataPointIndex=this.editedTemplate.dataPoints.indexOf(t)},deleteItem:function(t){confirm("确定删除 ".concat(t.templateName," 吗?"))&&this.$store.dispatch("deleteTemplate",{call:this,v:t})},commit:function(){if(this.editedTemplateIndex>=0)return this.$store.dispatch("putTemplate",this);this.$store.dispatch("postTemplate",this)},close:function(){this.dialogForm=!1,this.editedDataPoint=Object.assign({}),this.editedTemplate=Object.assign({dataPoints:[]}),this.editedTemplateIndex=-1,this.switch1=!1},save:function(){this.editedDataPoint.frequency=parseInt(this.editedDataPoint.frequency),this.$refs.form.validate()&&(this.switch1?this.editedTemplate.dataPoints.push(Object(l["a"])({},this.editedDataPoint)):this.editedTemplate.dataPoints.splice(this.editedtDataPointIndex,1,Object(l["a"])({},this.editedDataPoint))),this.switch1=!1}}},n=d,o=a("2877"),r=a("6544"),c=a.n(r),m=a("8336"),u=a("b0af"),v=a("99d9"),p=a("62ad"),h=a("a523"),f=a("8fea"),b=a("169a"),x=a("ce7e"),g=a("4bd4"),T=a("132d"),D=a("adda"),P=a("0fd9"),k=a("b974"),w=a("2fa4"),y=a("b73d"),_=a("8654"),V=a("71d9"),I=Object(o["a"])(n,i,s,!1,null,null,null);e["default"]=I.exports;c()(I,{VBtn:m["a"],VCard:u["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:p["a"],VContainer:h["a"],VDataTable:f["a"],VDialog:b["a"],VDivider:x["a"],VForm:g["a"],VIcon:T["a"],VImg:D["a"],VRow:P["a"],VSelect:k["a"],VSpacer:w["a"],VSwitch:y["a"],VTextField:_["a"],VToolbar:V["a"]})}}]);
//# sourceMappingURL=chunk-2d0a36dc.b1c26dfe.js.map